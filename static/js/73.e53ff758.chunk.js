"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[73],{7284:function(e,r,s){s.d(r,{D:function(){return u}});var t=s(1413),n=s(5987),o=(s(2791),s(9271)),i=s(364),a=s(184),l=["isAuth"],c=function(e){return{isAuth:e.auth.isAuth}};function u(e){return(0,i.$j)(c)((function(r){var s=r.isAuth,i=(0,n.Z)(r,l);return s?(0,a.jsx)(e,(0,t.Z)({},i)):(0,a.jsx)(o.l_,{to:"/login"})}))}},1073:function(e,r,s){s.r(r),s.d(r,{default:function(){return me}});var t=s(1413),n=s(5671),o=s(3144),i=s(136),a=s(7277),l=s(2791),c="ProfileInfo_descriptionBlock__mYF+8",u="ProfileInfo_profileImg__nvDWT",d="ProfileInfo_statusTitle__dircP",f="ProfileInfo_uploadBlock__xb60q",h=s(3445),p=s(4353),x="Contact_contact__-6vIk",j=s(184),m=function(e){var r=e.contactTitle,s=e.contactValue;return(0,j.jsxs)("div",{className:x,children:[(0,j.jsx)("b",{children:r}),": ",s]})},v=s(435),P="ProfileData_profileData__YQItl",Z=function(e){var r=e.profile,s=e.setProfileDataStatus,t=e.isOwner;return(0,j.jsxs)("div",{className:P,children:[t&&(0,j.jsx)(v.Z,{style:{maxWidth:"180px"},onClick:function(){s("loading")},children:"Edit profile"}),(0,j.jsxs)("div",{children:[(0,j.jsx)("b",{children:"Full name"}),": ",r.fullName]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("b",{children:"Looking for a job"}),": ",r.lookingForAJob?"yes":"no"]}),r.lookingForAJob&&(0,j.jsxs)("div",{children:[(0,j.jsx)("b",{children:"My Skills"}),": ",r.lookingForAJobDescription]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("b",{children:"About me"}),": ",r.aboutMe]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("b",{children:"Contacts"}),": ",Object.keys(r.contacts).map((function(e){return(0,j.jsx)(m,{contactTitle:e,contactValue:r.contacts[e]},e)}))]})]})},b=s(5861),g=s(5987),_=s(7757),k=s.n(_),S=s(1134),D=s(4695),y=s(8928),A=s(4297),C="ProfileDataForm_formBlock__OVgTi",N="ProfileDataForm_textArea__oC16S",w="ProfileDataForm_inputBlock__xpHq+",F="ProfileDataForm_areaError__vp7Hs",I=s(1694),T=s.n(I),E=s(9977),O=s(8786),U=s(9603),M=s(4587),B=["photos"],J=E.Z.TextArea,Q=function(e){var r=e.profile,s=e.onSubmitProfileDate,n=(r.photos,(0,g.Z)(r,B)),o=(0,S.cI)({defaultValues:(0,t.Z)({},n),resolver:(0,D.X)(y.n)}),i=o.control,a=o.handleSubmit,l=o.setError,c=o.formState.errors,u=function(){var e=(0,b.Z)(k().mark((function e(r){var t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s(r);case 3:e.sent,e.next=11;break;case 6:e.prev=6,e.t0=e.catch(0),"string"!==typeof(t=e.t0)?t.map((function(e){var r=e.substring(e.indexOf(">")+1,e.indexOf(")")).toLowerCase();l("contacts.".concat(r),{type:"serverError",message:e.substring(0,e.indexOf("("))})})):l("networkError",{type:"networkError",message:t});case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(r){return e.apply(this,arguments)}}();return(0,j.jsxs)("form",{onSubmit:a(u),className:C,children:[(0,j.jsx)(v.Z,{style:{maxWidth:"180px"},htmlType:"submit",children:"Save"}),(0,j.jsxs)(O.Z,{children:[(0,j.jsx)(U.Z,{span:6,children:(0,j.jsx)("b",{children:"Full name:"})}),(0,j.jsx)(U.Z,{span:10,children:(0,j.jsx)(S.Qr,{control:i,name:"fullName",render:function(e){var r=e.field;return(0,j.jsx)(E.Z,(0,t.Z)({placeholder:"Full name"},r))}})})]}),(0,j.jsxs)(O.Z,{children:[(0,j.jsx)(U.Z,{span:6,children:(0,j.jsx)("b",{children:"Looking for a job:"})}),(0,j.jsx)(U.Z,{span:10,children:(0,j.jsx)(S.Qr,{control:i,name:"lookingForAJob",render:function(e){var r=e.field,s=r.value,t=r.onChange;return(0,j.jsx)(M.Z,{checked:s,onChange:function(e){t(e.target.checked)}})}})})]}),(0,j.jsxs)(O.Z,{children:[(0,j.jsx)(U.Z,{span:6,children:(0,j.jsx)("b",{children:"My Skills:"})}),(0,j.jsxs)(U.Z,{span:10,className:w,children:[(0,j.jsx)(S.Qr,{control:i,name:"lookingForAJobDescription",render:function(e){var r=e.field;return(0,j.jsx)(J,(0,t.Z)({className:N,placeholder:"Enter skills"},r))}}),c.lookingForAJobDescription&&(0,j.jsx)("div",{className:T()(A.Z.error,F),children:c.lookingForAJobDescription.message})]})]}),(0,j.jsxs)(O.Z,{children:[(0,j.jsx)(U.Z,{span:6,children:(0,j.jsx)("b",{children:"About me:"})}),(0,j.jsxs)(U.Z,{span:10,className:w,children:[(0,j.jsx)(S.Qr,{control:i,name:"aboutMe",render:function(e){var r=e.field;return(0,j.jsx)(J,(0,t.Z)({className:N,placeholder:"About me"},r))}}),c.aboutMe&&(0,j.jsx)("div",{className:T()(A.Z.error,F),children:c.aboutMe.message})]})]}),(0,j.jsxs)("div",{className:C,children:[(0,j.jsx)("b",{children:"Contacts:"}),Object.keys(r.contacts).map((function(e){var r,s;return(0,j.jsxs)(O.Z,{children:[(0,j.jsx)(U.Z,{span:6,children:(0,j.jsxs)("b",{children:[e,":"]})}),(0,j.jsxs)(U.Z,{span:10,className:w,children:[(0,j.jsx)(S.Qr,{control:i,name:"contacts.".concat(e),render:function(r){var s=r.field;return(0,j.jsx)(E.Z,(0,t.Z)({placeholder:e},s))}}),(null===(r=c.contacts)||void 0===r?void 0:r[e])&&(0,j.jsx)("div",{className:A.Z.error,children:null===(s=c.contacts[e])||void 0===s?void 0:s.message})]})]},e)}))]}),c.networkError&&(0,j.jsx)("div",{className:A.Z.error,children:c.networkError.message})]})},z=s(9439),W=s(7504),q=function(e){return e.profilePage.status},L=function(e){return e.profilePage.dataStatus},V=s(9565),X=s(9911),$=s(81),G=function(){var e=(0,V.C)(L),r=(0,V.C)(q),s=(0,X.T)(),t=(0,l.useState)(!1),n=(0,z.Z)(t,2),o=n[0],i=n[1],a=(0,l.useState)(r),c=(0,z.Z)(a,2),u=c[0],d=c[1];(0,l.useEffect)((function(){d(r)}),[r]);return(0,j.jsxs)("div",{children:[!o&&(0,j.jsx)("div",{children:"loading"===e?(0,j.jsx)(W.Z.Input,{active:!0}):(0,j.jsx)("span",{onDoubleClick:function(){i(!0)},children:u||"-------"})}),o&&(0,j.jsx)("div",{children:(0,j.jsx)(E.Z,{value:u,onBlur:function(){i(!1),s((0,$.az)(u))},onChange:function(e){d(e.currentTarget.value)},autoFocus:!0})})]})},H=s(6700),Y=s(2351),K=function(e){var r=e.onProfilePhotoSelected,s=(0,l.useState)(null),t=(0,z.Z)(s,2),n=t[0],o=t[1],i=(0,l.useState)(!1),a=(0,z.Z)(i,2),c=a[0],u=a[1],d=function(){var e=(0,b.Z)(k().mark((function e(s){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(s);case 2:e.sent,u(!0);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){var e=setTimeout((function(){u(!1)}),2e3);return function(){clearTimeout(e)}}),[c]),(0,j.jsxs)("div",{children:[!c&&(0,j.jsx)(H.Z,{accept:".jpeg,.jpg,.png",maxCount:1,beforeUpload:function(e){return o(e),d(e),!1},children:(0,j.jsx)(v.Z,{icon:(0,j.jsx)(Y.Z,{}),children:"Click to Upload"})}),c&&(0,j.jsxs)("div",{children:[null===n||void 0===n?void 0:n.name," was successfully uploaded!"]})]})},R=function(e){var r=e.profile,s=e.isOwner,t=e.savePhoto,n=e.profileDataStatus,o=e.setProfileDataStatus,i=e.onSubmitProfileDate;if(!r)return(0,j.jsx)(h.p,{});return(0,j.jsx)("div",{children:(0,j.jsxs)("div",{className:c,children:[(0,j.jsxs)(O.Z,{children:[(0,j.jsx)(U.Z,{span:5,children:(0,j.jsx)("img",{src:r.photos.large||p,alt:"Profile",className:u})}),(0,j.jsx)(U.Z,{span:19,children:(0,j.jsxs)(O.Z,{children:[(0,j.jsx)("b",{className:d,children:"Status:"})," ",(0,j.jsx)(G,{})]})})]}),s&&(0,j.jsx)("div",{className:f,children:(0,j.jsx)(K,{onProfilePhotoSelected:function(e){return t(e)}})}),"idle"===n||"succeeded"===n?(0,j.jsx)(Z,{profile:r,setProfileDataStatus:o,isOwner:s}):(0,j.jsx)(Q,{profile:r,onSubmitProfileDate:i})]})})},ee={postsBlock:"MyPosts_postsBlock__oe-je",postArea:"MyPosts_postArea__p56Xr"},re="Post_item__ZhK2W",se="Post_avatar__Xio5t",te=s(9529),ne=s(7734),oe=function(e){return(0,j.jsxs)("div",{className:re,children:[(0,j.jsx)(ne.C,{size:50,icon:(0,j.jsx)(te.Z,{}),className:se}),e.message,(0,j.jsx)("div",{children:(0,j.jsxs)("span",{children:["like ",e.likeCount]})})]})},ie="MyPostsForm_textArea__oG691",ae=E.Z.TextArea,le=function(e){var r=e.onPostChange,s=(0,S.cI)(),n=s.control,o=s.handleSubmit,i=s.reset;return(0,j.jsxs)("form",{onSubmit:o((function(e){r(e),i()})),children:[(0,j.jsx)("div",{children:(0,j.jsx)(S.Qr,{control:n,name:"newPost",render:function(e){var r=e.field;return(0,j.jsx)(ae,(0,t.Z)({className:ie},r))}})}),(0,j.jsx)("div",{children:(0,j.jsx)(v.Z,{style:{maxWidth:"180px"},htmlType:"submit",children:"Add post"})})]})},ce=(0,l.memo)((function(e){var r=e.posts,s=e.addPost,t=r.map((function(e){return(0,j.jsx)(oe,{message:e.message,likeCount:e.likeCount},e.id)}));return(0,j.jsxs)("div",{className:ee.postsBlock,children:[(0,j.jsx)("h3",{children:"My posts"}),(0,j.jsx)("div",{className:ee.postArea,children:(0,j.jsx)(le,{onPostChange:function(e){s(e.newPost)}})}),(0,j.jsx)("div",{className:ee.posts,children:t})]})})),ue=s(364),de=(0,ue.$j)((function(e){return{posts:e.profilePage.posts}}),(function(e){return{addPost:function(r){e((0,$.Pi)(r))}}}))(ce),fe=function(e){var r=e.profile,s=e.isOwner,t=e.savePhoto,n=e.profileDataStatus,o=e.onSubmitProfileDate,i=e.setProfileDataStatus;return(0,j.jsxs)("main",{children:[(0,j.jsx)(R,{profile:r,isOwner:s,savePhoto:t,profileDataStatus:n,setProfileDataStatus:i,onSubmitProfileDate:o}),(0,j.jsx)(de,{})]})},he=s(9271),pe=s(7781),xe=s(7284),je=function(e){(0,i.Z)(s,e);var r=(0,a.Z)(s);function s(){return(0,n.Z)(this,s),r.apply(this,arguments)}return(0,o.Z)(s,[{key:"refreshProfile",value:function(){var e=+this.props.match.params.userId;e||(e=this.props.autorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getUserStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,r,s){this.props.match.params.userId!=e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,j.jsx)("div",{children:(0,j.jsx)(fe,(0,t.Z)((0,t.Z)({},this.props),{},{profile:this.props.profile,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto,profileDataStatus:this.props.profileDataStatus,setProfileDataStatus:this.props.setProfileDataStatusAC,onSubmitProfileDate:this.props.updateUserProfile}))})}}]),s}(l.Component),me=(0,pe.qC)((0,ue.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,autorizedUserId:e.auth.userId,isAuth:e.auth.isAuth,profileDataStatus:e.profilePage.profileDataStatus}}),{getUserProfile:$.et,getUserStatus:$.Tq,changeUserStatus:$.az,savePhoto:$.Ju,setProfileDataStatusAC:$.G5,updateUserProfile:$.Lj}),he.EN,xe.D)(je)}}]);
//# sourceMappingURL=73.e53ff758.chunk.js.map